# Yetla Onboarding Guide

欢迎加入 Yetla 项目！本项目旨在构建一个用于二级域名及短链接管理的服务。仓库现在包含一个最小可运行的演示环境，帮助你理解子域通过 Nginx 路由的核心思路，并为后续扩展提供基础代码。

## 项目背景与目标
- **业务目标**：提供统一的平台管理自定义二级域名与短链接，对接 DNS、反向代理或重定向服务。
- **目标受众**：运维与开发团队需要批量管理域名、内外部推广需要追踪点击量的业务线。
- **交付愿景**：最终系统应包含可观测性（日志、指标）、权限管理（按团队或项目分级）、以及自动化发布工作流（审批、审核、发布）等模块。

## 仓库结构

```
.
├── apps/                  # 供 Nginx upstream 使用的静态站点示例
├── backend/               # FastAPI 原型，实现子域映射查询 API
├── docs/                  # 项目文档与设计说明
├── infra/nginx/           # Nginx 子域路由与跳转配置
└── docker-compose.yml     # 本地一键启动编排
```

> 目录均包含示例代码，可直接启动与调试，欢迎在此基础上继续扩展。

## 关键设计领域

1. **DNS 与域名管理**
   - 需要在 DNS 服务商处配置 `*.yet.la` 的泛解析指向入口服务器。
   - 理解常见 DNS 服务（如 Cloudflare、Route53）的 API 设计。
2. **短链接生成与跳转**
   - 调研短链接冲突检测策略、批量生成算法。
   - 比较 301、302、307 重定向对缓存和统计的影响。
3. **权限与审计**
   - 设计细粒度的 RBAC 或 ABAC 模型。
   - 梳理审批流程、审核日志与追踪需求。
4. **可观测性**
   - 定义日志规范、指标采集与告警阈值。
   - 预留访问日志与跳转统计数据的分析方案。

## 上手建议
1. **启动演示环境**：按照根目录 `README.md` 中的步骤运行 Docker Compose，体验子域转发逻辑。
2. **阅读 Nginx 配置**：理解 `infra/nginx/conf.d/subdomains.conf` 中的 `map`、`upstream` 与跳转策略。
3. **扩展后端 API**：在 `backend/app/main.py` 基础上实现数据库持久化与权限校验。
4. **沉淀文档**：对每次讨论产出的结论及时记录在 `docs/` 下，形成迭代式设计文档。
5. **关注安全与合规**：短链接服务涉及外部访问，需提前考虑安全扫描、访问控制与审计留存。

## 下一步工作建议
- 制定 MVP 范围（最小可行功能）并拆解任务。
- 定义 API 契约、数据模型和状态流转图。
- 设计前端信息架构和操作流程原型。
- 编写自动化测试与部署策略的初始方案。

如有任何疑问，请在团队沟通渠道中联系维护者，或在仓库中创建 Issue 讨论。
